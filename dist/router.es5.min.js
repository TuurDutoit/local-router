!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Router=e()}(this,function(){"use strict";var t={};t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),t.toConsumableArray=function(t){if(Array.isArray(t)){for(var e=0,s=Array(t.length);e<t.length;e++)s[e]=t[e];return s}return Array.from(t)};var e=function(){function e(){var s=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],a=i.routes,n=void 0===a?{}:a,o=i.defaultRoute,r=i.prefix,h=void 0===r?"mode-":r;t.classCallCheck(this,e),this.$body=document.body,this.prefix=h,this.defaultRoute=o,this.routes=n,this._routes=Object.keys(n),this.rroutes=new RegExp("^("+this._routes.join("|")+")$","i"),this.rhashes=new RegExp("^#("+this._routes.map(this.getHash,this).join("|")+")$","i"),this.rcallbacks=new RegExp("^("+this._routes.join("|")+"|\\*)$"),this.allClasses=this._routes.map(function(t){return s.prefix+t}),this.callbacks={"*":[]},this.checks={},this.classes={},!this.defaultRoute&&this._routes.length&&(this.defaultRoute=this._routes[0]),this.init()}return t.createClass(e,[{key:"init",value:function(){var t=this;this._routes.forEach(function(e){t.callbacks[e]=[],t.checks[e]=new RegExp("^#"+t.getHash(e)+"$","i"),t.classes[e]=t.prefix+e}),window.addEventListener("hashchange",this),window.addEventListener("load",this)}},{key:"getHash",value:function(t){return this.routes[t]?t+"-.*":t}},{key:"handleEvent",value:function(){var e=this;this.rhashes.test(location.hash)?!function(){for(var s,i="",a=void 0,n=0,o=e._routes.length;o>n;n++)if(a=e._routes[n],e.checks[a].test(location.hash)){e.routes[a]&&(i=decodeURIComponent(location.hash.slice(a.length+2)));break}(s=e.$body.classList).remove.apply(s,t.toConsumableArray(e.allClasses)),e.$body.classList.add(e.classes[a]),e.callbacks[a].forEach(function(t){t(i)}),e.callbacks["*"].forEach(function(t){t(a,i)})}():location.hash="#"+this.defaultRoute}},{key:"on",value:function(t,e){return this.rcallbacks.test(t)&&this.callbacks[t].push(e),this}},{key:"off",value:function(t,e){if(this.rcallbacks.test(t)){var s=this.callbacks[t].indexOf(e);-1!==s&&this.callbacks[t].splice(s,1)}return this}},{key:"go",value:function(t,e){if(this.rroutes.test(t)){this.routes[t]&&(t+="-"+(e?encodeURIComponent(e):""));var s="#"+t;location.hash!==s&&(location.hash=s)}return this}}]),e}();return e});